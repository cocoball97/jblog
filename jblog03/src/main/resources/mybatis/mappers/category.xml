<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="category">
	
	<select id="findCategory" parameterType="map" resultType="categoryvo">
		<![CDATA[
		select id, name, blog_id
		  from category
		 where blog_id = #{id}
		]]>	
	</select>

	<select id="findCategoryList" parameterType="String" resultType="categoryvo">
		<![CDATA[
		select a.id, a.name, a.description, count(b.id) as count
		  from category a
left join post b on a.id = b.category_id
		 where blog_id = #{id}
	  group by a.id
	  order by a.id desc;
		]]>	
	</select>
		<select id="findCategoryOne" parameterType="map" resultType="categoryvo">
		<![CDATA[
		select id, name, blog_id
		  from category
		 where blog_id = #{id} and id = #{categoryId}
		]]>	
	</select>
	
	<insert id="insert" parameterType="map">
		<![CDATA[
		insert
		  into category
		values (null, #{name}, #{description}, #{id})
		]]>
	</insert>

	
</mapper>